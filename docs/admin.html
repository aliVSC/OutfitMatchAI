<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OutfitMatch - Admin</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <div class="container">

    <div class="card">
      <h1>Panel Administrador</h1>
      <p class="subtitle">Gestión de catálogo, clientes y métricas.</p>

      <div class="row">
        <button id="tabDashboard" class="primary">Dashboard</button>
        <button id="tabPrendas" class="secondary">Prendas</button>
        <button id="tabClientes" class="secondary">Clientes</button>
        <button id="btnLogout" class="secondary">Salir</button>
      </div>

      <p id="msg" class="msg"></p>
    </div>

    <!-- DASHBOARD -->
    <div id="viewDashboard" class="card hidden">
      <h2>Dashboard (Hoy)</h2>
      <div class="grid2">
        <div class="card">
          <h3>Total clientes</h3>
          <p id="kpiTotalClientes" class="price">0</p>
        </div>
        <div class="card">
          <h3>Clientes hoy</h3>
          <p id="kpiClientesHoy" class="price">0</p>
        </div>
        <div class="card">
          <h3>Prendas activas</h3>
          <p id="kpiPrendasActivas" class="price">0</p>
        </div>
        <div class="card">
          <h3>Try-ons hoy</h3>
          <p id="kpiTryonsHoy" class="price">0</p>
        </div>
      </div>
    </div>

    <!-- PRENDAS -->
    <div id="viewPrendas" class="card hidden">
      <h2>Prendas</h2>

      <p class="hint" id="editHint">Creando prenda nueva</p>

      <div class="grid">
        <div>
          <label>Nombre</label>
          <input id="pNombre" placeholder="Ej: Vestido rosa" />
        </div>

        <div>
          <label>Categoría</label>
          <input id="pCategoria" placeholder="Ej: vestidos" />
        </div>

        <div>
          <label>Color</label>
          <input id="pColor" placeholder="Ej: rosado" />
        </div>

        <div>
          <label>Precio</label>
          <input id="pPrecio" type="number" step="0.01" placeholder="19.99" />
        </div>

        <div>
          <label>Stock</label>
          <input id="pStock" type="number" placeholder="10" />
        </div>

        <div>
          <label>Activo</label>
          <select id="pActivo">
            <option value="1">Sí</option>
            <option value="0">No</option>
          </select>
        </div>

        <!-- OverlayUrl ya NO se usa para IA, pero lo dejo por compatibilidad si tú lo quieres guardar -->
        <div>
          <label>OverlayUrl (opcional)</label>
          <input id="pOverlayUrl" placeholder="(opcional) https://..." />
        </div>
      </div>

      <hr style="border:none;border-top:1px solid #eee;margin:16px 0;" />

      <h3>Imágenes</h3>

      <div class="grid2">
        <div class="card">
          <label><strong>Foto de frente (OBLIGATORIA)</strong></label>
          <input id="imgFrente" type="file" accept="image/*" />
          <img id="prevFrente" class="preview hidden" alt="Vista previa frente" />
          <p class="hint">Tip: En celular puedes elegir cámara o galería.</p>
        </div>

        <div class="card">
          <label><strong>Foto de espalda (opcional)</strong></label>
          <input id="imgAtras" type="file" accept="image/*" />
          <img id="prevAtras" class="preview hidden" alt="Vista previa atrás" />
        </div>
      </div>

      <div class="card">
        <label><strong>Más fotos (opcional)</strong> (ej: laterales, detalle)</label>
        <input id="imgExtras" type="file" accept="image/*" multiple />
        <div id="extrasPreview" class="catalog"></div>
      </div>

      <!-- ✅ NUEVO: OVERLAY COMO ARCHIVO (PNG) -->
      <div class="card">
        <label><strong>Overlay PNG (OBLIGATORIO para TryOn IA)</strong> (debe ser PNG con transparencia)</label>
        <input id="imgOverlay" type="file" accept="image/png" />
        <img id="prevOverlay" class="preview hidden" alt="Vista previa overlay" />
        <p class="hint">Este overlay se guarda en la BD como base64 (sin URL).</p>
      </div>

      <div class="row">
        <button id="btnGuardarPrenda" class="primary">Guardar prenda</button>
        <button id="btnLimpiarPrenda" class="secondary">Limpiar</button>
        <button id="btnRefrescarPrendas" class="secondary">Refrescar lista</button>
      </div>

      <hr style="border:none;border-top:1px solid #eee;margin:16px 0;" />

      <div id="prendasList" class="catalog"></div>
    </div>

    <!-- CLIENTES -->
    <div id="viewClientes" class="card hidden">
      <h2>Clientes</h2>
      <div class="row">
        <button id="btnRefrescarClientes" class="secondary">Refrescar</button>
      </div>
      <div id="clientesList" class="card"></div>
    </div>

  </div>

  <script src="js/config.js"></script>
  <script src="js/admin.js"></script>
</body>
</html>
